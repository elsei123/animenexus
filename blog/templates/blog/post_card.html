{% load static %}

<article class="post-card">
  <a href="{% url 'post_detail' post.id %}" class="post-card__image-link" aria-label="Open post: {{ post.title }}">
    {% if post.cover_image %}
      <img
        src="{{ post.cover_image.url }}"
        alt="Cover for {{ post.title }}"
        class="post-card__image"
        loading="lazy"
        decoding="async">
    {% else %}
      <img
        src="{% static 'images/hero-bg.jpg' %}"
        alt="Default cover"
        class="post-card__image"
        loading="lazy"
        decoding="async">
    {% endif %}
  </a>

  <div class="post-card__content">
    <h2 class="post-card__title">
      <a href="{% url 'post_detail' post.id %}">{{ post.title }}</a>
    </h2>

    <p class="post-card__excerpt">
      {{ post.content|striptags|truncatewords:20 }}
    </p>

    <div class="post-card__meta">
      by
      <a href="{% url 'profile' username=post.author.username %}" class="post-card__author">
        {{ post.author.username }}
      </a>
      &bull;
      <time datetime="{{ post.created_at|date:'Y-m-d' }}">{{ post.created_at|date:"d M Y" }}</time>
    </div>
  </div>
</article>
